#!/usr/bin/env bqn
âŸ¨ToFFIâ‹„ParseHeaderâŸ© â† â€¢Import "parseAPL.bqn"
map â† [
  "RL_ZERO"â€¿"RLGL_VERSION"
  "RLZERO" â€¿"RLGLVersionString"
]

broken_rlVertexBuffer â† 1â†“"
typedef struct rlVertexBuffer {
    int elementCount;           // Number of elements in the buffer (QUADS)

    float *vertices;            // Vertex position (XYZ - 3 components per vertex) (shader-location = 0)
    float *texcoords;           // Vertex texture coordinates (UV - 2 components per vertex) (shader-location = 1)
    float *normals;             // Vertex normal (XYZ - 3 components per vertex) (shader-location = 2)
    unsigned char *colors;      // Vertex colors (RGBA - 4 components per vertex) (shader-location = 3)
#if defined(GRAPHICS_API_OPENGL_11) || defined(GRAPHICS_API_OPENGL_33)
    unsigned int *indices;      // Vertex indices (in case vertex data comes indexed) (6 indices per quad)
#endif
#if defined(GRAPHICS_API_OPENGL_ES2)
    unsigned short *indices;    // Vertex indices (in case vertex data comes indexed) (6 indices per quad)
#endif
    unsigned int vaoId;         // OpenGL Vertex Array Object id
    unsigned int vboId[5];      // OpenGL Vertex Buffer Objects id (5 types of vertex data)
} rlVertexBuffer;"

fix1_rlVertexBuffer â† 1â†“"
typedef struct rlVertexBuffer {
    int elementCount;           // Number of elements in the buffer (QUADS)

    float *vertices;            // Vertex position (XYZ - 3 components per vertex) (shader-location = 0)
    float *texcoords;           // Vertex texture coordinates (UV - 2 components per vertex) (shader-location = 1)
    unsigned char *colors;      // Vertex colors (RGBA - 4 components per vertex) (shader-location = 3)
    unsigned int *indices;      // Vertex indices (in case vertex data comes indexed) (6 indices per quad)
    unsigned int vaoId;         // OpenGL Vertex Array Object id
    unsigned int vboId[4];      // OpenGL Vertex Buffer Objects id (4 types of vertex data)
} rlVertexBuffer;"

fix2_rlVertexBuffer â† 1â†“"
typedef struct rlVertexBuffer {
    int elementCount;           // Number of elements in the buffer (QUADS)

    float *vertices;            // Vertex position (XYZ - 3 components per vertex) (shader-location = 0)
    float *texcoords;           // Vertex texture coordinates (UV - 2 components per vertex) (shader-location = 1)
    unsigned char *colors;      // Vertex colors (RGBA - 4 components per vertex) (shader-location = 3)
    unsigned short *indices;    // Vertex indices (in case vertex data comes indexed) (6 indices per quad)
    unsigned int vaoId;         // OpenGL Vertex Array Object id
    unsigned int vboId[4];      // OpenGL Vertex Buffer Objects id (4 types of vertex data)
} rlVertexBuffer;"

Fix_rlVertexBuffer â† {
  if â† âŠ‘/broken_rlVertexBufferâ·ğ•©
  il â† if+â‰ broken_rlVertexBuffer
  (ifâŠ¸â†‘âˆ¾fix1_rlVertexBufferâˆ¾ilâŠ¸â†“)ğ•©
}

broken_StatePointerâ†1â†“"
#if defined(GRAPHICS_API_OPENGL_11)
RLAPI void rlEnableStatePointer(int vertexAttribType, void *buffer); // Enable attribute state pointer
RLAPI void rlDisableStatePointer(int vertexAttribType); // Disable attribute state pointer
#endif
"

Fix_StatePointer â† {
  if â† âŠ‘/broken_StatePointerâ·ğ•©
  il â† if+â‰ broken_StatePointer
  (ifâŠ¸â†‘âˆ¾ilâŠ¸â†“)ğ•©
}

file â† â€¢FChars "../lib/rlgl.h"
file Fix_rlVertexBufferâ†©
file Fix_StatePointerâ†©
file ParseHeaderËœâ†© "RLAPI"
file ToFFIËœâ†© map
file âˆ¾Ëœâ†© ":Namespace rlgl"âˆ¾@+10
file âˆ¾â†© ":EndNamespace"âˆ¾Ëœ@+10
file âˆ¾â†© @+10
destination â† "../link/rlgl.apln"
destination â€¢FChars file
â€¢Out destinationâˆ¾" successfully generated"
